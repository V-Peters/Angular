<app-loader *ngIf="isLoading"></app-loader>
<div *ngIf="!isLoading" class="card col-xs-5">
  <div *ngIf="isLoggedIn">
    Sie können sich nicht registrieren, wahrend Sie eingeloggt sind.
  </div>
  <div *ngIf="!isLoggedIn">
    <h3>Registrierung</h3>
    <hr>
    <form
    [formGroup]="registerForm"
    (ngSubmit)="onSubmit()">
      <div class="form-group">
        <span for="username">Benutzername:</span>
        <i *ngIf="registerForm.get('username').invalid && registerForm.get('username').touched || usernameAlreadyExists"> {{ usernameError }}</i>
        <input
        type="text"
        id="username"
        formControlName="username"
        class="form-control"
        (ngModelChange)="changedUsername()">
      </div>
      <div class="form-group">
        <span for="password">Passwort:</span>
        <i *ngIf="registerForm.get('password').invalid && registerForm.get('password').touched"> {{ passwordError }}</i>
        <input
        type="password"
        id="password"
        formControlName="password"
        class="form-control"
        (ngModelChange)="changedPassword()">
      </div>
      <div class="form-group">
        <span for="passwordCheck">Passwort bestätigen:</span>
        <i *ngIf="registerForm.get('passwordCheck').touched && passwordCheckError"> {{ passwordCheckError }}</i>
        <input
        type="password"
        id="passwordCheck"
        formControlName="passwordCheck"
        class="form-control"
        (ngModelChange)="changedPasswordCheck()">
      </div>
      <hr>
      <div class="form-group">
        <span for="firstname">Vorname:</span>
        <i *ngIf="registerForm.get('firstname').invalid && registerForm.get('firstname').touched"> {{ firstnameError }}</i>
        <input
        type="text"
        id="firstname"
        formControlName="firstname"
        class="form-control"
        (ngModelChange)="changedFirstname()">
      </div>
      <div class="form-group">
        <span for="lastname">Nachname:</span>
        <i *ngIf="registerForm.get('lastname').invalid && registerForm.get('lastname').touched"> {{ lastnameError }}</i>
        <input
        type="text"
        id="lastname"
        formControlName="lastname"
        class="form-control"
        (ngModelChange)="changedLastname()">
      </div>
      <div class="form-group">
        <span for="email">E-Mail:</span>
        <i *ngIf="registerForm.get('email').invalid && registerForm.get('email').touched || emailAlreadyExists"> {{ emailError }}</i>
        <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        (ngModelChange)="changedEmail()">
      </div>
      <div class="form-group">
        <span for="company">Firma/Unternehmen:</span>
        <i *ngIf="registerForm.get('company').invalid && registerForm.get('company').touched"> {{ companyError }}</i>
        <input
        type="text"
        id="company"
        formControlName="company"
        class="form-control"
        (ngModelChange)="changedCompany()">
      </div>
      <i *ngIf="isSignUpFailed">Fehlerhafte Registrierungsdaten</i>
      <br>
      <br>
      <button type="submit" class="btn btn-info btn-block" [disabled]="registerForm.invalid || usernameAlreadyExists || emailAlreadyExists || passwordCheckError">
        <span *ngIf="!(registerForm.invalid || usernameAlreadyExists || emailAlreadyExists || passwordCheckError)">Registrieren</span>
        <span *ngIf="registerForm.invalid || usernameAlreadyExists || emailAlreadyExists || passwordCheckError" class="disabled"> Das Registrierungsformular ist noch nicht vollständig ausgefüllt.</span>
      </button>
      <hr>
      <button type="button" class="btn btn-primary btn-block" (click)="onLogin()">Doch schon Mitglied? Zurück zum Login</button>
    </form>
  </div>
</div>
