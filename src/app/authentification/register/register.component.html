<app-loader *ngIf="isLoading"></app-loader>
<div *ngIf="!isLoading" class="card col-xs-5">
  <div *ngIf="isLoggedIn">
    Sie können sich nicht registrieren, wahrend Sie eingeloggt sind.
  </div>
  <div *ngIf="!isLoggedIn">
    <h3>Registrierung</h3>
    <hr>
    <form
    [formGroup]="registerForm"
    (ngSubmit)="onSubmit()">
      <div class="form-group">
        <span for="username">Benutzername:</span>
        <span *ngIf="registerForm.get('username').invalid && registerForm.get('username').touched || usernameAlreadyExists" style="color: red;">
          <i> {{ usernameError }}</i>
        </span>
        <input
        type="text"
        id="username"
        formControlName="username"
        class="form-control"
        (ngModelChange)="changedUsername()">
      </div>
      <div class="form-group">
        <span for="password">Passwort:</span>
        <span *ngIf="registerForm.get('password').invalid && registerForm.get('password').touched" style="color: red;">
          <i> {{ passwordError }}</i>
        </span>
        <input
        type="password"
        id="password"
        formControlName="password"
        class="form-control"
        (ngModelChange)="changedPassword()">
      </div>
      <div class="form-group">
        <span for="passwordCheck">Passwort bestätigen:</span>
        <span *ngIf="registerForm.get('passwordCheck').touched && passwordCheckError" style="color: red;">
          <i> {{ passwordCheckError }}</i>
        </span>
        <input
        type="password"
        id="passwordCheck"
        formControlName="passwordCheck"
        class="form-control"
        (ngModelChange)="changedPasswordCheck()">
      </div>
      <hr>
      <div class="form-group">
        <span for="firstname">Vorname:</span>
        <span *ngIf="registerForm.get('firstname').invalid && registerForm.get('firstname').touched" style="color: red;">
          <i> {{ firstnameError }}</i>
        </span>
        <input
        type="text"
        id="firstname"
        formControlName="firstname"
        class="form-control"
        (ngModelChange)="changedFirstname()">
      </div>
      <div class="form-group">
        <span for="lastname">Nachname:</span>
        <span *ngIf="registerForm.get('lastname').invalid && registerForm.get('lastname').touched" style="color: red;">
          <i> {{ lastnameError }}</i>
        </span>
        <input
        type="text"
        id="lastname"
        formControlName="lastname"
        class="form-control"
        (ngModelChange)="changedLastname()">
      </div>
      <div class="form-group">
        <span for="email">E-Mail:</span>
        <span *ngIf="registerForm.get('email').invalid && registerForm.get('email').touched || emailAlreadyExists" style="color: red;">
          <i> {{ emailError }}</i>
        </span>
        <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        (ngModelChange)="changedEmail()">
      </div>
      <div class="form-group">
        <span for="company">Firma/Unternehmen:</span>
        <span *ngIf="registerForm.get('company').invalid && registerForm.get('company').touched" style="color: red;">
          <i> {{ companyError }}</i>
        </span>
        <input
        type="text"
        id="company"
        formControlName="company"
        class="form-control"
        (ngModelChange)="changedCompany()">
      </div>
      <i *ngIf="isSignUpFailed" style="color: red;">Fehlerhafte Registrierungsdaten</i>
      <br>
      <br>
      <button type="submit" class="btn btn-info btn-block" [disabled]="registerForm.invalid || usernameAlreadyExists || emailAlreadyExists || passwordCheckError">
        <span *ngIf="registerForm.valid && !usernameAlreadyExists && !emailAlreadyExists && !passwordCheckError">Registrieren</span>
        <span *ngIf="registerForm.invalid || usernameAlreadyExists || emailAlreadyExists || passwordCheckError" style="color: rgb(117, 0, 0);"> Das Registrierungsformular ist noch nicht vollständig ausgefüllt.</span>
      </button>
      <hr>
      <button type="button" class="btn btn-primary btn-block" (click)="onLogin()">Doch schon Mitglied? Zurück zum Login</button>
    </form>
  </div>
</div>
